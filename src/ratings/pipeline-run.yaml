---
apiVersion: tekton.dev/v1alpha1
kind: PipelineRun
metadata:
  name: ratings-pipeline-run
spec:
  serviceAccountName: ecr-service-acct
  pipelineRef:
    name: generic-pipeline
  params:
    - name: pathToDockerFile
      value: ./src/ratings/Dockerfile
    - name: pathToContext
      value: ./src/ratings/
    - name: deploymentYamlPath
      value: ./platform/kube/bookinfo-ratings.yaml
  resources:
    - name: source-repo
      resourceRef:
        name: bookinfo-git
    - name: service-image
      resourceSpec:
        type: image
        params:
        - name: url
          value: <IMAGE-TAG>
                    